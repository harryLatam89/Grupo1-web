<div class="col-md-12">
    <div class="row">
        <div class="col-md-6" *ngIf="contratante && contratante.idContratante >= 0">
            <div class="row" [style.margin]="'0.5em'">
                <mat-card>
                    <mat-card-title>
                        <label class="h4" *ngIf="vacanteSeleccionada.idVacante > 0 && vacanteSeleccionada?.activo && vacanteSeleccionada.estado < VACANTE_ESTADO_COMPLETO">Editar Vacante</label>
                        <label class="h4" *ngIf="vacanteSeleccionada.idVacante == 0 ">Registrar nueva vacante</label>
                    </mat-card-title>
                    <mat-card-content>
                        <form id="frmVacante" [formGroup]="vacanteForm" (ngSubmit)="guardarVacante()">
                            <div class="row">
                                <mat-form-field>
                                    <mat-label>Nombre de la vacante</mat-label>
                                    <input matInput required formControlName="nombre" [ngClass]="{ 'is-invalid': vacanteF('nombre')?.errors }" />
                                    <mat-error *ngIf="vacanteF('nombre')?.errors">Â¿cual sera el nombre de la vacante?</mat-error>
                                </mat-form-field>
                            </div>
                            <div class="row">
                                <mat-form-field>
                                    <mat-label>Descripcion</mat-label>
                                    <input matInput required formControlName="descripcion" [ngClass]="{ 'is-invalid': vacanteF('descripcion')?.errors }" />
                                    <mat-error *ngIf="vacanteF('descripcion')?.errors">escribe una descripcion</mat-error>
                                </mat-form-field>
                            </div>
                            <div class="row">
                                <button mat-stroked-button color="primary" type="submit">Registrar</button>
                            </div>
                        </form>
                    </mat-card-content>
                </mat-card>
            </div>
            <div class="row">
                <mat-divider></mat-divider>
            </div>
            <div class="row" *ngIf="vacanteSeleccionada?.activo && vacanteSeleccionada.estado < VACANTE_ESTADO_COMPLETO" [style.margin]="'0.5em'">
                <mat-card>
                    <mat-card-title>
                        <label class="h4">Agregar Competencias a la Vacante</label>
                    </mat-card-title>
                    <mat-card-content>
                        <form id="frmCompetencia" [formGroup]="competenciaForm" (ngSubmit)="agregarCompetenciasAVanteNoOcupada()">
                            <div class="row">
                                <mat-form-field>
                                    <mat-label>Competencia</mat-label>
                                    <mat-select [compareWith]="compareIds" required formControlName="competencia" [ngClass]="{ 'is-invalid': competenciaF('competencia')?.errors }">
                                        <mat-option *ngFor="let compet of competenciasList; let i = index" [value]="compet.idCompetencia">{{compet.nombreCompetencia}}</mat-option>
                                    </mat-select>
                                    <mat-error *ngIf="competenciaF('competencia')?.errors">Elige una competencia</mat-error>
                                </mat-form-field>
                            </div>
                            <div class="row">
                                <button mat-stroked-button color="primary" type="submit">Agregar</button>
                            </div>
                        </form>
                    </mat-card-content>
                </mat-card>
            </div>
            <div class="row">
                <mat-divider></mat-divider>
            </div>
            <div class="row" *ngIf="competenciaSeleccionadaList && competenciaSeleccionadaList.length > 0">
                <mat-card>
                    <mat-card-title>
                        <label class="h4">Competencias Registradas</label>
                    </mat-card-title>
                    <mat-card-content>
                        <div class="row">
                            <mat-chip-list aria-label="Competencias" *ngIf="competenciaSeleccionadaList && competenciaSeleccionadaList.length > 0">
                                <mat-chip *ngFor="let competenciaq of competenciaSeleccionadaList">
                                    {{competenciaq.nombreCompetencia}}
                                </mat-chip>
                            </mat-chip-list>
                        </div>
                    </mat-card-content>
                </mat-card>
            </div>
        </div>
        <div class="col-md-6">
            <div class="row" [style.margin]="'0.5em'">
                <mat-card>
                    <mat-card-title>
                        <label class="h4">Filtros de Vacantes</label>
                    </mat-card-title>
                    <mat-card-content>
                        <div class="row">
                            <div class="col-md-6">
                                <mat-checkbox matInput [formControl]="verDeOtros" (change)="contratanteFiltroVerTodos($event.checked)">Ver Vacantes de otros contratantes</mat-checkbox>
                            </div>
                            <div class="col-md-6">
                                <mat-checkbox matInput [formControl]="verDesactivados" (change)="contratanteFiltroVerDesactivados($event.checked)">Ver Vacantes desactivadas</mat-checkbox>
                            </div>
                            <div class="col-md-6">
                                <mat-checkbox matInput [formControl]="verOcupados" (change)="contratanteFiltroVerOcupados($event.checked)">Ver Vacantes Ocupadas</mat-checkbox>
                            </div>
                        </div>
                    </mat-card-content>
                </mat-card>
            </div>
            <div class="row" [style.margin]="'0.5em'">
                <mat-card>
                    <mat-card-title>
                        <label class="h4">Vacantes Registradas</label>
                    </mat-card-title>
                    <mat-card-content>
                        <div class="row">
                            <div class="col-md-6" *ngFor="let vacanteq of vacanteList" [style.marginBottom]="'1em'">
                                <mat-card [style.width]="'100%'">
                                    <mat-card-subtitle class="text-center">
                                        <div class="row" [style.flexDirection]="'row-reverse'" *ngIf="contratante && contratante.idContratante >= 0 && vacanteq.contratante.idContratante == contratante.idContratante && vacanteq.estado < VACANTE_ESTADO_COMPLETO">
                                            <!-- el boton desactivar aparecera unicamente si el usuario es contratante y si ha creado la oferta el mismo -->
                                            <button mat-flat-button (click)="desactivarVacante(vacanteq.idVacante)" class="col-md-2">
                                                <mat-icon>cancel</mat-icon>
                                              </button>
                                        </div>
                                        <div class="row">
                                            <label class="col-md-12 h6">
                                                {{vacanteq.nombreVacante}}
                                            </label>
                                        </div>
                                    </mat-card-subtitle>
                                    <mat-card-content class="text-center">
                                        <!-- el boton aplicar aparecera unicamente si el usuario no es contratante o si no ha creado la oferta el mismo -->
                                        <div class="row">
                                            <button mat-button *ngIf="!contratante || contratante.idContratante == 0 || vacanteq.contratante.idContratante != contratante.idContratante">
                                                <mat-icon>assignment_ind</mat-icon>
                                                Aplicar
                                              </button>
                                            <button mat-button (click)="verVacante(vacanteq.idVacante)">
                                                <mat-icon>remove_red_eye</mat-icon>
                                                Ver
                                              </button>
                                        </div>
                                        <div class="row">
                                            <p>{{vacanteq.descripcion}}</p>
                                        </div>
                                    </mat-card-content>
                                </mat-card>
                            </div>
                        </div>
                    </mat-card-content>
                </mat-card>
            </div>
        </div>
    </div>
</div>